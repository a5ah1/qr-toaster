<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ description | default: site.description }}">
    <title>{{ title | default: site.fullName }}</title>

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="{{ '/favicon-96x96.png' | url }}" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="{{ '/favicon.svg' | url }}">
    <link rel="shortcut icon" href="{{ '/favicon.ico' | url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/apple-touch-icon.png' | url }}">
    <meta name="apple-mobile-web-app-title" content="QR Toaster">

    <!-- SEO Meta Tags -->
    <meta name="application-name" content="{{ site.name }}">
    <meta name="robots" content="index,follow">
    <meta name="theme-color" content="{{ site.themeColor }}">
    <link rel="canonical" href="{{ site.url }}{{ page.url }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:title" content="{{ title | default: site.fullName }}">
    <meta property="og:description" content="{{ description | default: site.description }}">
    <meta property="og:site_name" content="{{ site.name }}">
    <meta property="og:image" content="{{ site.ogImage }}">
    <meta property="og:image:width" content="{{ site.ogImageWidth }}">
    <meta property="og:image:height" content="{{ site.ogImageHeight }}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ site.url }}{{ page.url }}">
    <meta name="twitter:title" content="{{ title | default: site.fullName }}">
    <meta name="twitter:description" content="{{ description | default: site.description }}">
    <meta name="twitter:image" content="{{ site.ogImage }}">

    <!-- Stylesheets and Assets -->
    <link rel="stylesheet" href="{{ '/css/output.css' | url }}?v={{ build.version }}">
    <link rel="manifest" href="{{ '/manifest.json' | url }}">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "{{ site.name }}",
      "description": "{{ site.description }}",
      "url": "{{ site.url }}",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>

    <!-- Scripts -->
    <script src="{{ '/js/main.js' | url }}?v={{ build.version }}" type="module" defer></script>
</head>
<body class="min-h-screen bg-gray-900 text-gray-100 text-base">
    <!-- Navigation -->
    <nav class="bg-gray-800 shadow-sm border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="{{ '/' | url }}" class="text-xl font-bold text-gray-100 hover:text-blue-300">QR Toaster</a>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="{{ '/' | url }}" class="border-transparent text-gray-300 hover:border-blue-400 hover:text-blue-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Text/URL
                        </a>
                        <a href="{{ '/wifi' | url }}" class="border-transparent text-gray-300 hover:border-blue-400 hover:text-blue-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Wi-Fi
                        </a>
                        <a href="{{ '/contact' | url }}" class="border-transparent text-gray-300 hover:border-blue-400 hover:text-blue-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Contact
                        </a>
                        <a href="{{ '/event' | url }}" class="border-transparent text-gray-300 hover:border-blue-400 hover:text-blue-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Event
                        </a>
                        <a href="{{ '/otp' | url }}" class="border-transparent text-gray-300 hover:border-blue-400 hover:text-blue-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            OTP/2FA
                        </a>
                        <a href="{{ '/about' | url }}" class="border-transparent text-gray-300 hover:border-blue-400 hover:text-blue-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            About
                        </a>
                    </div>
                </div>
                <!-- Mobile menu button -->
                <div class="sm:hidden flex items-center">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500" aria-label="Open menu">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile menu overlay -->
    <div id="mobile-menu-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 sm:hidden" aria-hidden="true"></div>

    <!-- Mobile slide-in menu -->
    <div id="mobile-menu" class="fixed inset-y-0 right-0 max-w-xs w-full bg-gray-800 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 sm:hidden" aria-hidden="true">
        <div class="h-full flex flex-col">
            <!-- Menu header with close button -->
            <div class="flex items-center justify-between p-4 border-b border-gray-700">
                <h2 class="text-lg font-semibold text-gray-100">Menu</h2>
                <button id="mobile-menu-close" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500" aria-label="Close menu">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <!-- Menu links -->
            <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
                <a href="{{ '/' | url }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Text/URL</a>
                <a href="{{ '/wifi' | url }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Wi-Fi</a>
                <a href="{{ '/contact' | url }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Contact</a>
                <a href="{{ '/event' | url }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Event</a>
                <a href="{{ '/otp' | url }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">OTP/2FA</a>
                <a href="{{ '/about' | url }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">About</a>
            </nav>
        </div>
    </div>

    <!-- Main content -->
    <main class="flex-1">
        <div class="max-w-xl xl:max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8 py-8 text-base">
            <!-- Page header section -->
            <header id="page-header" class="mb-8">
                <!-- Page-specific h1 and intro will be injected here by each page -->
            </header>

            <!-- Three-panel layout -->
            <section class="grid grid-cols-1 xl:grid-cols-12 gap-6">
                <!-- Left Panel: Content Controls -->
                <div class="col-span-1 xl:col-span-5 bg-gray-800 rounded-lg shadow p-6">
                    <h2 class="text-lg font-semibold text-gray-100 mb-4">Content</h2>
                    <div id="content-controls">
                        {{ content }}
                        
                        <!-- Raw Content Display -->
                        <details class="border border-gray-600 rounded-lg mt-4">
                            <summary class="px-4 py-2 cursor-pointer text-sm font-medium text-gray-300 hover:bg-gray-700">
                                View Raw Content
                            </summary>
                            <div class="p-4 border-t border-gray-600">
                                <div class="text-sm text-gray-400 mb-2">Raw data that will be encoded in the QR code:</div>
                                <output id="qr-content-display" class="block w-full p-3 bg-gray-900 border border-gray-600 rounded-md text-sm font-mono text-gray-300 whitespace-pre-wrap break-words min-h-[60px]">No content</output>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- Middle Panel: Appearance Controls -->
                <div class="col-span-1 xl:col-span-3 bg-gray-800 rounded-lg shadow p-6">
                    <h2 class="text-lg font-semibold text-gray-100 mb-4">Appearance</h2>

                    <!-- Color Controls -->
                    <div class="space-y-4 mb-4">
                        <div>
                            <label for="qr-fg-color" class="block text-sm font-medium text-gray-300 mb-2">Foreground</label>
                            <input type="color" id="qr-fg-color" value="#000000" class="w-full h-10 rounded">
                        </div>
                        <div>
                            <label for="qr-bg-color" class="block text-sm font-medium text-gray-300 mb-2">Background</label>
                            <input type="color" id="qr-bg-color" value="#FFFFFF" class="w-full h-10 rounded">
                        </div>
                    </div>

                    <!-- Margin Control -->
                    <div class="mb-4">
                        <label for="qr-margin" class="block text-sm font-medium text-gray-300 mb-2">Margin (modules)</label>
                        <input
                            type="number"
                            id="qr-margin"
                            min="0"
                            max="10"
                            value="1"
                            class="w-full rounded-md"
                        >
                        <div class="text-sm text-gray-400 mt-1">Quiet zone around QR code</div>
                    </div>

                    <!-- Transparent Background Toggle -->
                    <div class="mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="transparent-background" class="rounded text-blue-600 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-300">Transparent background</span>
                        </label>
                    </div>

                    <!-- Styling Toggle -->
                    <div class="mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="enable-styling" class="rounded text-blue-600 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-300">Enable advanced styling</span>
                        </label>
                    </div>

                    <!-- Styling Options (shown when advanced styling is enabled) -->
                    <div id="styling-options" class="hidden mb-4 p-4 border border-gray-600 rounded-lg bg-gray-750 space-y-4">
                        <!-- Dot Style -->
                        <div>
                            <label for="dot-style" class="block text-sm font-medium text-gray-300 mb-2">Dot Style</label>
                            <select id="dot-style" class="w-full rounded-md">
                                <option value="square">Square</option>
                                <option value="rounded">Rounded</option>
                                <option value="dots">Dots</option>
                                <option value="classy">Classy</option>
                                <option value="classy-rounded">Classy Rounded</option>
                                <option value="extra-rounded">Extra Rounded</option>
                            </select>
                        </div>

                        <!-- Corner Square Style -->
                        <div>
                            <label for="corner-square-style" class="block text-sm font-medium text-gray-300 mb-2">Corner Square Style</label>
                            <select id="corner-square-style" class="w-full rounded-md">
                                <option value="square">Square</option>
                                <option value="dot">Dot</option>
                                <option value="extra-rounded">Extra Rounded</option>
                            </select>
                        </div>

                        <!-- Corner Dot Style -->
                        <div>
                            <label for="corner-dot-style" class="block text-sm font-medium text-gray-300 mb-2">Corner Dot Style</label>
                            <select id="corner-dot-style" class="w-full rounded-md">
                                <option value="square" selected>Square</option>
                                <option value="dot">Dot</option>
                            </select>
                        </div>

                        <!-- Background Rounding -->
                        <div>
                            <label for="background-round" class="block text-sm font-medium text-gray-300 mb-2">
                                Corner Rounding: <span id="background-round-value">0</span>
                            </label>
                            <input
                                type="range"
                                id="background-round"
                                min="0"
                                max="0.4"
                                step="0.1"
                                value="0"
                                class="w-full"
                            >
                            <div class="text-xs text-gray-400 mt-1">Rounds the background container (0 = sharp corners, 0.4 = fully rounded)</div>
                        </div>
                    </div>

                    <!-- Advanced Options Accordion -->
                    <details class="border border-gray-600 rounded-lg">
                        <summary class="px-4 py-2 cursor-pointer text-sm font-medium text-gray-300 hover:bg-gray-700">
                            Advanced Options
                        </summary>
                        <div class="p-4 border-t border-gray-600">
                            <label for="error-correction" class="block text-sm font-medium text-gray-300 mb-2">
                                Error Correction Level
                            </label>
                            <select id="error-correction" class="w-full rounded-md">
                                <option value="L">Low (7%)</option>
                                <option value="M" selected>Medium (15%)</option>
                                <option value="Q">Quartile (25%)</option>
                                <option value="H">High (30%)</option>
                            </select>
                        </div>
                    </details>
                </div>

                <!-- Right Panel: Output -->
                <div class="col-span-1 xl:col-span-4 bg-gray-800 rounded-lg shadow p-6">
                    <h2 class="text-lg font-semibold text-gray-100 mb-4">Output</h2>
                    
                    <!-- Preview -->
                    <div id="qr-preview" class="flex justify-center items-center mb-4 p-4 bg-gray-700 rounded-lg min-h-[250px] overflow-hidden">
                        <p class="text-gray-400 text-sm">QR code preview will appear here</p>
                    </div>

                    <!-- Download Controls -->
                    <div class="space-y-3">
                        <!-- Size Control -->
                        <div>
                            <label for="qr-size" class="block text-sm font-medium text-gray-300 mb-1">Size (px)</label>
                            <input 
                                type="number" 
                                id="qr-size" 
                                min="100" 
                                max="2000" 
                                value="300" 
                                step="50"
                                class="w-full rounded-md"
                            >
                        </div>
                        
                        <div>
                            <label for="download-format" class="block text-sm font-medium text-gray-300 mb-1">Format</label>
                            <select id="download-format" class="w-full rounded-md">
                                <option value="svg">SVG</option>
                                <option value="png" disabled>PNG (enable styling)</option>
                                <option value="jpeg" disabled>JPEG (enable styling)</option>
                                <option value="webp" disabled>WebP (enable styling)</option>
                            </select>
                        </div>

                        <!-- Resolution slider (hidden by default) -->
                        <div id="resolution-control" class="hidden">
                            <label for="download-resolution" class="block text-sm font-medium text-gray-300 mb-1">Resolution</label>
                            <input type="range" id="download-resolution" min="300" max="3000" value="1000" step="10" class="w-full">
                            <div class="text-sm text-gray-400 mt-1">
                                <span id="resolution-value">1000</span>px
                            </div>
                        </div>

                        <button id="download-btn" class="w-full bg-blue-600 text-white font-medium py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Download QR Code
                        </button>
                    </div>
                </div>
            </section>

            <!-- Educational content section -->
            <article id="page-documentation" class="mt-12 prose prose-invert max-w-3xl mx-auto">
                <!-- Page-specific documentation will be injected here by each page -->
            </article>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 border-t border-gray-700 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Footer Links Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <!-- About Section -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-100 uppercase tracking-wider mb-3">QR Toaster</h3>
                    <p class="text-sm text-gray-400 mb-3">
                        Privacy-focused QR code generator. All processing happens locally in your browser. No tracking, no analytics, no servers.
                    </p>
                </div>

                <!-- QR Generators -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-100 uppercase tracking-wider mb-3">Generators</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="{{ '/' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">Text / URL</a></li>
                        <li><a href="{{ '/wifi' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">Wi-Fi</a></li>
                        <li><a href="{{ '/contact' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">Contact (vCard)</a></li>
                        <li><a href="{{ '/event' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">Event (iCalendar)</a></li>
                        <li><a href="{{ '/otp' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">OTP / 2FA</a></li>
                    </ul>
                </div>

                <!-- Information -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-100 uppercase tracking-wider mb-3">Information</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="{{ '/about' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">About</a></li>
                        <li><a href="{{ '/privacy' | url }}" class="text-gray-400 hover:text-blue-400 transition-colors">Privacy</a></li>
                        <li><a href="https://github.com/a5ah1/qr-toaster" target="_blank" rel="noopener" class="text-gray-400 hover:text-blue-400 transition-colors">GitHub</a></li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="border-t border-gray-700 pt-6">
                <div class="flex flex-col md:flex-row justify-between items-center gap-3 text-xs text-gray-500">
                    <div>
                        Open source under <a href="https://github.com/a5ah1/qr-toaster/blob/main/LICENSE" target="_blank" rel="noopener" class="hover:text-blue-400">MIT License</a>
                    </div>
                    <div class="font-mono">
                        Build: <a href="https://github.com/a5ah1/qr-toaster/commit/{{ build.hash }}" target="_blank" rel="noopener" class="hover:text-blue-400">{{ build.hash }}</a>
                        {% if build.hash != 'dev' %}| {{ build.commitDate | date: "%Y-%m-%d" }}{% endif %}
                    </div>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>